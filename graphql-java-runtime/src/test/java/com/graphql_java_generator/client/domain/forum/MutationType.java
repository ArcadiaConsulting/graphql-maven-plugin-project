package com.graphql_java_generator.client.domain.forum;

import java.io.IOException;
import java.util.HashMap;
import java.util.Map;

import org.apache.logging.log4j.LogManager;
import org.apache.logging.log4j.Logger;

import com.graphql_java_generator.annotation.GraphQLNonScalar;
import com.graphql_java_generator.annotation.GraphQLQuery;
import com.graphql_java_generator.client.QueryExecutor;
import com.graphql_java_generator.client.QueryExecutorImpl;
import com.graphql_java_generator.client.request.Builder;
import com.graphql_java_generator.client.request.InputParameter;
import com.graphql_java_generator.client.request.ObjectResponse;
import com.graphql_java_generator.exception.GraphQLRequestExecutionException;
import com.graphql_java_generator.exception.GraphQLRequestPreparationException;

/**
 * @author generated by graphql-java-generator
 * @See https://github.com/graphql-java-generator/graphql-java-generator
 */
public class MutationType {

	/** Logger for this class */
	private static Logger logger = LogManager.getLogger();

	final QueryExecutor executor;

	/**
	 * This constructor expects the URI of the GraphQL server.<BR/>
	 * For example: https://my.server.com/graphql
	 * 
	 * @param graphqlEndpoint
	 */
	public MutationType(String graphqlEndpoint) {
		this.executor = new QueryExecutorImpl(graphqlEndpoint);
		new CustomScalarRegistryInitializer().initCustomScalarRegistry();
	}

	/**
	 * This method is expected by the graphql-java framework. It will be called when this query is called. It offers a
	 * logging of the call (if in debug mode), or of the call and its parameters (if in trace mode).<BR/>
	 * This method takes care of writting the query name, and the parameter(s) for the query. The given queryResponseDef
	 * describes the format of the response of the server response, that is the expected fields of the {@link Board}
	 * GraphQL type. It can be something like "{ id name }", if you want these fields of this type. Please take a look
	 * at the StarWars, Forum and other samples for more complex queries.
	 * 
	 * @param queryResponseDef
	 *            The response definition of the query, in the native GraphQL format (see here above)
	 * @param episode
	 *            Parameter 1 of this query
	 * @throws IOException
	 * @throws GraphQLRequestPreparationException
	 *             When an error occurs during the request preparation, typically when building the
	 *             {@link ObjectResponse}
	 * @throws GraphQLRequestExecutionException
	 *             When an error occurs during the request execution, typically a network error, an error from the
	 *             GraphQL server or if the server response can't be parsed
	 */
	@GraphQLNonScalar(graphQLTypeName = "Board", javaClass = Board.class)
	@GraphQLQuery
	public Board createBoard(String queryResponseDef, String name, Boolean publiclyAvailable,
			Map<String, Object> parameters)
			throws GraphQLRequestExecutionException, GraphQLRequestPreparationException {
		logger.debug("Executing of query 'createBoard' in query mode: {} ", queryResponseDef);
		ObjectResponse objectResponse = getCreateBoardResponseBuilder().withQueryResponseDef(queryResponseDef).build();
		return createBoard(objectResponse, name, publiclyAvailable, parameters);
	}

	/**
	 * This method is expected by the graphql-java framework. It will be called when this query is called. It offers a
	 * logging of the call (if in debug mode), or of the call and its parameters (if in trace mode).
	 * 
	 * @param objectResponse
	 *            The definition of the response format, that describes what the GraphQL server is expected to return
	 * @param episode
	 * @throws IOException
	 * @throws GraphQLRequestExecutionException
	 *             When an error occurs during the request execution, typically a network error, an error from the
	 *             GraphQL server or if the server response can't be parsed
	 */
	@GraphQLNonScalar(graphQLTypeName = "Board", javaClass = Board.class)
	@GraphQLQuery
	public Board createBoard(ObjectResponse objectResponse, String name, Boolean publiclyAvailable,
			Map<String, Object> parameters) throws GraphQLRequestExecutionException {
		if (logger.isTraceEnabled()) {
			logger.trace("Executing of mutation 'createBoard' with parameters: {}, {} ", name, publiclyAvailable);
		} else if (logger.isDebugEnabled()) {
			logger.debug("Executing of mutation 'createBoard'");
		}

		// Given values for the BindVariables
		parameters = (parameters != null) ? parameters : new HashMap<>();
		parameters.put("mutationTypeCreateBoardName", name);

		if (!Board.class.equals(objectResponse.getFieldClass())) {
			throw new GraphQLRequestExecutionException("The ObjectResponse parameter should be an instance of "
					+ Board.class + ", but is an instance of " + objectResponse.getClass().getName());
		}

		MutationTypeCreateBoard ret = executor.execute("mutation", objectResponse, parameters,
				MutationTypeCreateBoard.class);

		return ret.createBoard;
	}

	public Board createBoard(ObjectResponse objectResponse, String name, Boolean publiclyAvailable)
			throws GraphQLRequestExecutionException {
		return createBoard(objectResponse, name, publiclyAvailable, null);
	}

	/**
	 * Get the {@link ObjectResponse.Builder} for the Board, as expected by the createBoard query.
	 * 
	 * @return
	 * @throws GraphQLRequestPreparationException
	 */
	public Builder getCreateBoardResponseBuilder() throws GraphQLRequestPreparationException {
		Builder builder = new Builder(getClass(), "createBoard");
		builder.withInputParameter(InputParameter.newBindParameter("name", "mutationTypeCreateBoard", true, null));
		builder.withInputParameter(
				InputParameter.newBindParameter("publiclyAvailable", "mutationTypePubliclyAvailable", true, null));
		return builder;
	}

	/**
	 * This method is expected by the graphql-java framework. It will be called when this query is called. It offers a
	 * logging of the call (if in debug mode), or of the call and its parameters (if in trace mode).<BR/>
	 * This method takes care of writting the query name, and the parameter(s) for the query. The given queryResponseDef
	 * describes the format of the response of the server response, that is the expected fields of the {@link Topic}
	 * GraphQL type. It can be something like "{ id name }", if you want these fields of this type. Please take a look
	 * at the StarWars, Forum and other samples for more complex queries.
	 * 
	 * @param queryResponseDef
	 *            The response definition of the query, in the native GraphQL format (see here above)
	 * @param episode
	 *            Parameter 1 of this query
	 * @throws IOException
	 * @throws GraphQLRequestPreparationException
	 *             When an error occurs during the request preparation, typically when building the
	 *             {@link ObjectResponse}
	 * @throws GraphQLRequestExecutionException
	 *             When an error occurs during the request execution, typically a network error, an error from the
	 *             GraphQL server or if the server response can't be parsed
	 */
	@GraphQLNonScalar(graphQLTypeName = "Topic", javaClass = Topic.class)
	@GraphQLQuery
	public Topic createTopic(String queryResponseDef, String authorId, Boolean publiclyAvailable, String title,
			String content, Map<String, Object> parameters)
			throws GraphQLRequestExecutionException, GraphQLRequestPreparationException {
		logger.debug("Executing of query 'createTopic' in query mode: {} ", queryResponseDef);
		ObjectResponse objectResponse = getCreateTopicResponseBuilder().withQueryResponseDef(queryResponseDef).build();
		return createTopic(objectResponse, authorId, publiclyAvailable, title, content, parameters);
	}

	/**
	 * This method is expected by the graphql-java framework. It will be called when this query is called. It offers a
	 * logging of the call (if in debug mode), or of the call and its parameters (if in trace mode).
	 * 
	 * @param objectResponse
	 *            The definition of the response format, that describes what the GraphQL server is expected to return
	 * @param episode
	 * @throws IOException
	 * @throws GraphQLRequestExecutionException
	 *             When an error occurs during the request execution, typically a network error, an error from the
	 *             GraphQL server or if the server response can't be parsed
	 */
	@GraphQLNonScalar(graphQLTypeName = "Topic", javaClass = Topic.class)
	@GraphQLQuery
	public Topic createTopic(ObjectResponse objectResponse, String authorId, Boolean publiclyAvailable, String title,
			String content, Map<String, Object> parameters) throws GraphQLRequestExecutionException {
		if (logger.isTraceEnabled()) {
			logger.trace("Executing of mutation 'createTopic' with parameters: {}, {}, {}, {} ", authorId,
					publiclyAvailable, title, content);
		} else if (logger.isDebugEnabled()) {
			logger.debug("Executing of mutation 'createTopic'");
		}

		// Given values for the BindVariables
		parameters = (parameters != null) ? parameters : new HashMap<>();
		parameters.put("mutationTypeCreateTopicAuthorId", authorId);
		parameters.put("mutationTypeCreateTopicPubliclyAvailable", publiclyAvailable);
		parameters.put("mutationTypeCreateTopicTitle", title);
		parameters.put("mutationTypeCreateTopicContent", content);

		if (!Topic.class.equals(objectResponse.getFieldClass())) {
			throw new GraphQLRequestExecutionException("The ObjectResponse parameter should be an instance of "
					+ Topic.class + ", but is an instance of " + objectResponse.getClass().getName());
		}

		MutationTypeCreateTopic ret = executor.execute("mutation", objectResponse, parameters,
				MutationTypeCreateTopic.class);

		return ret.createTopic;
	}

	/**
	 * Get the {@link ObjectResponse.Builder} for the Topic, as expected by the createTopic query.
	 * 
	 * @return
	 * @throws GraphQLRequestPreparationException
	 */
	public Builder getCreateTopicResponseBuilder() throws GraphQLRequestPreparationException {
		return new Builder(getClass(), "createTopic");
	}

	/**
	 * This method is expected by the graphql-java framework. It will be called when this query is called. It offers a
	 * logging of the call (if in debug mode), or of the call and its parameters (if in trace mode).<BR/>
	 * This method takes care of writting the query name, and the parameter(s) for the query. The given queryResponseDef
	 * describes the format of the response of the server response, that is the expected fields of the {@link Post}
	 * GraphQL type. It can be something like "{ id name }", if you want these fields of this type. Please take a look
	 * at the StarWars, Forum and other samples for more complex queries.
	 * 
	 * @param queryResponseDef
	 *            The response definition of the query, in the native GraphQL format (see here above)
	 * @param episode
	 *            Parameter 1 of this query
	 * @throws IOException
	 * @throws GraphQLRequestPreparationException
	 *             When an error occurs during the request preparation, typically when building the
	 *             {@link ObjectResponse}
	 * @throws GraphQLRequestExecutionException
	 *             When an error occurs during the request execution, typically a network error, an error from the
	 *             GraphQL server or if the server response can't be parsed
	 */
	@GraphQLNonScalar(graphQLTypeName = "Post", javaClass = Post.class)
	@GraphQLQuery
	public Post createPost(String queryResponseDef, String authorId, Boolean publiclyAvailable, String title,
			String content, Map<String, Object> parameters)
			throws GraphQLRequestExecutionException, GraphQLRequestPreparationException {
		logger.debug("Executing of query 'createPost' in query mode: {} ", queryResponseDef);
		ObjectResponse objectResponse = getCreatePostResponseBuilder().withQueryResponseDef(queryResponseDef).build();
		return createPost(objectResponse, authorId, publiclyAvailable, title, content, parameters);
	}

	/**
	 * This method is expected by the graphql-java framework. It will be called when this query is called. It offers a
	 * logging of the call (if in debug mode), or of the call and its parameters (if in trace mode).
	 * 
	 * @param objectResponse
	 *            The definition of the response format, that describes what the GraphQL server is expected to return
	 * @param episode
	 * @throws IOException
	 * @throws GraphQLRequestExecutionException
	 *             When an error occurs during the request execution, typically a network error, an error from the
	 *             GraphQL server or if the server response can't be parsed
	 */
	@GraphQLNonScalar(graphQLTypeName = "Post", javaClass = Post.class)
	@GraphQLQuery
	public Post createPost(ObjectResponse objectResponse, String authorId, Boolean publiclyAvailable, String title,
			String content, Map<String, Object> parameters) throws GraphQLRequestExecutionException {
		if (logger.isTraceEnabled()) {
			logger.trace("Executing of mutation 'createPost' with parameters: {}, {}, {}, {} ", authorId,
					publiclyAvailable, title, content);
		} else if (logger.isDebugEnabled()) {
			logger.debug("Executing of mutation 'createPost'");
		}

		// Given values for the BindVariables
		parameters = (parameters != null) ? parameters : new HashMap<>();
		parameters.put("mutationTypeCreatePostAuthorId", authorId);
		parameters.put("mutationTypeCreatePostPubliclyAvailable", publiclyAvailable);
		parameters.put("mutationTypeCreatePostTitle", title);
		parameters.put("mutationTypeCreatePostContent", content);

		if (!Post.class.equals(objectResponse.getFieldClass())) {
			throw new GraphQLRequestExecutionException("The ObjectResponse parameter should be an instance of "
					+ Post.class + ", but is an instance of " + objectResponse.getClass().getName());
		}

		MutationTypeCreatePost ret = executor.execute("mutation", objectResponse, parameters,
				MutationTypeCreatePost.class);

		return ret.createPost;
	}

	/**
	 * Get the {@link ObjectResponse.Builder} for the Post, as expected by the createPost query.
	 * 
	 * @return
	 * @throws GraphQLRequestPreparationException
	 */
	public Builder getCreatePostResponseBuilder() throws GraphQLRequestPreparationException {
		return new Builder(getClass(), "createPost");
	}

}
